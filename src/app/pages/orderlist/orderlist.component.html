<!-- Column -->
<!-- delete modal -->
<div *ngIf="viewPermission" class="d-flex align-items-center justify-content-between">
  <ul class="nav nav-tabs cstm_tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" href="#Past" role="tab" (click)="changeFilterType(0);changetabPast()"
        data-toggle="tab">Past Events</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#ongoing" role="tab" (click)="changeFilterType(1);changetabOngoing()"
        data-toggle="tab">Ongoing Events</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#upcoming" role="tab" (click)="changeFilterType(2);changetabUpcoming()"
        data-toggle="tab">Upcoming
        Events</a>
    </li>
  </ul>
  <div class="text-right mr-3"><button *ngIf="addPermission" class="btn btn-primary" (click)="Adddetails(Adddetail)"><i
        class="sl-icon-plus"></i> Add</button></div>
</div>
<ng-template #noPermission>
  <div class="card">
  <h2 class="m-5 d-flex align-items-center justify-content-center w-100">You don't have Permission to view this section</h2>

  </div>
</ng-template>
<!-- Past  -->
<div *ngIf="viewPermission;else noPermission" class="tab-content">
  <div role="tabpanel" class="tab-pane show active" id="Past">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <form>
                <div class="mb-2">
                  <input [ngModelOptions]="{ standalone: true }" [(ngModel)]="searchitem" (keyup)="search($event)"
                    type="text" class="form-control" id="pastSearch" placeholder="Search">
                </div>
              </form>
            </div>
            <div *ngIf="!noDataToggle" class="col-md-8 d-flex  justify-content-end">
              <!-- <div class="mr-2"><button class="btn btn-primary" (click)="Adddetails(Adddetail)"><i class="sl-icon-plus"></i> Add</button></div> -->
              <div ngbDropdown class="d-inline-block mb-2 mr-2">
                <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle> {{filterName}} </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(0,'All')">All</button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(1,'Public')"> Public
                  </button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(2,'Private')"> Private
                  </button>
                </div>
              </div>
              <button class="btn btn-primary mb-2 mr-2"><i class="sl-icon-cloud-download"></i> Export CSV</button>
            </div>
            <div class="table-responsive" *ngIf="!noDataToggle;else noDataHolder">
              <table mat-table class=" w-100" [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="Images">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                  <td mat-cell *matCellDef="let row">
                    <span class="img-small imageListing"><img src={{row?.eventType?.eventImage}} alt="wedding"
                        width="60" class="rounded"></span>
                    <!-- <div class="cstm_icn">
                      <ul class="icon_outr">
                        <li>
                          <span class="mdi mdi-food-variant icn"></span>
                        </li>
                      </ul>
                    </div> -->
                  </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="EventName">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Name </th>
                  <td mat-cell *matCellDef="let row"> {{row?.eventName || "-"}} </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="Event_type">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Public/Private </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <span *ngIf="row?.eventFor==1;else alterOption">Public</span>
                    <ng-template #alterOption>
                      <span>Private</span>
                    </ng-template>

                  </td>
                </ng-container>
                <!-- <ng-container matColumnDef="Eventtype">
                                    <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                                    <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.Eventtype}}
                                        <br> <i class="fa fa-glass"></i>
                                    </td>
                                </ng-container> -->
                <!-- Progress Column -->
                <ng-container matColumnDef="datetime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Created On </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.createdAt | date:'medium'}} </td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="Duration">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Duration </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">{{ getdiffDates(row)}}</td>
                </ng-container>
                <ng-container matColumnDef="Durationdate">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Date </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">{{moment(row?.startDate).format('DD-MM-YYYY')}}
                    - {{moment(row?.endDate).format('DD-MM-YYYY')}}</td>
                </ng-container>
                <ng-container matColumnDef="Durationtime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Time </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">{{row?.startTime}} - {{row?.endTime}}</td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="box">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Description </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.description || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="invited">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People invited </th>
                  <td mat-cell *matCellDef="let row">{{row?.invitedList.length+row.inviteGroup.length}}</td>
                </ng-container>
                <ng-container matColumnDef="invited2">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People directly invited </th>
                  <td mat-cell *matCellDef="let row"> {{row?.personalInvite}} </td>
                </ng-container>
                <ng-container matColumnDef="guest">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Guest list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.acceptedList.length}}
                    <a href="javascript:void(0)" (click)="carModal(car,row._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="attendees">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Max attendees </th>
                  <td mat-cell *matCellDef="let row"> {{row?.maxLength || "0"}} </td>
                </ng-container>
                <ng-container matColumnDef="Waiting">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Waiting list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.waitingList.length}}
                    <a href="javascript:void(0)" (click)="carModal2(car2, row?._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="messagescount">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of messages in chat </th>
                  <td mat-cell *matCellDef="let row"> {{row?.messagescount || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="likes">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of likes </th>
                  <td mat-cell *matCellDef="let row"> {{row?.likeCount}} </td>
                </ng-container>
                <!-- Address -->
                <ng-container matColumnDef="polls">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Polls </th>
                  <td mat-cell *matCellDef="let row"> <button id="{{row._id}}" class="btn btn-primary"
                      (click)="pollsmodal(polls, row?._id)">View</button></td>
                </ng-container>
                <ng-container matColumnDef="location">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap">Location </th>
                  <td mat-cell *matCellDef="let row"> {{row?.address || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-nowrap"> Action </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <div ngbDropdown placement="bottom-right" display="dynamic" class="dropdown-menu-right"
                      container="body">
                      <button class="btn btn-outline-primary btn-sm" id="dropdownBasic1" ngbDropdownToggle> Action
                      </button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <!-- <a class="dropdown-item" (click)="eventdetails(eventdetail)"><i class="ti-eye"></i> View </a> -->
                        <!-- <button class="dropdown-item" (click)="eventsedit(eventedit)"><i class="ti-marker-alt"></i> Edit</button> -->
                        <a href="javascript:void(0)" class="dropdown-item "
                          (click)="userDeleteModal(userDelete,row?._id)"> <i class="ti-trash"></i> Delete</a>
                      </div>
                      <!-- <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                                            </div> -->
                    </div>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
            <ng-template #noDataHolder>
              <h3 class="m-5 d-flex align-items-center justify-content-center w-100">No data found</h3>
            </ng-template>
            <div *ngIf="!noDataToggle" class="col-md-12 text-right">
              <mat-paginator [length]="totalEvents" [pageSize]="page" [pageSizeOptions]="[5, 10, 25, 100]"
                (page)="onPaginateChange($event)"></mat-paginator>
            </div>
          </div>
        </div>
      </div>
      <!-- Column -->
    </div>
  </div>

  <!-- Ongoing -->
  <div role="tabpanel" class="tab-pane fade" id="ongoing">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <form>
                <div class="mb-2">
                  <input [ngModelOptions]="{ standalone: true }" [(ngModel)]="searchitem" (keyup)="search($event)"
                    type="text" class="form-control" id="ongoingSearch" placeholder="Search">
                </div>
              </form>
            </div>
            <div *ngIf="!noDataToggle" class="col-md-8 d-flex  justify-content-end">
              <!-- <div class="mr-2"><button class="btn btn-primary" (click)="Adddetails(Adddetail)"><i class="sl-icon-plus"></i> Add</button></div> -->
              <div ngbDropdown class="d-inline-block mb-2 mr-2">
                <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle> {{filterName}} </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(0,'All')">All</button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(1,'Public')"> Public
                  </button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(2,'Private')"> Private
                  </button>
                </div>
              </div>
              <button class="btn btn-primary mb-2 mr-2"><i class="sl-icon-cloud-download"></i> Export CSV</button>
            </div>
            <div class="table-responsive" *ngIf="!noDataToggle;else noOngoingData">
              <table mat-table class=" w-100" [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="Images">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                  <td mat-cell *matCellDef="let row">
                    <span class="img-small imageListing"><img src={{row?.eventType?.eventImage}} alt="Event" width="60"
                        class="rounded"></span>
                    <!-- <div class="cstm_icn">
                      <ul class="icon_outr">
                        <li>
                          <span class="mdi mdi-food-variant icn"></span>
                        </li>
                      </ul>
                    </div> -->
                  </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="EventName">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Name </th>
                  <td mat-cell *matCellDef="let row"> {{row?.eventName || "-"}} </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="Event_type">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Public/Private </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <span *ngIf="row?.eventFor==1;else alterOption">Public</span>
                    <ng-template #alterOption>
                      <span>Private</span>
                    </ng-template>
                  </td>
                </ng-container>
                <!-- <ng-container matColumnDef="Eventtype">
                                    <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                                    <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.Eventtype}}
                                        <br> <i class="fa fa-glass"></i>
                                    </td>
                                </ng-container> -->
                <!-- Progress Column -->
                <ng-container matColumnDef="datetime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Created On </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.createdAt | date:'medium'}} </td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="Duration">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Duration </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">{{ getdiffDates(row)}}</td>
                </ng-container>
                <ng-container matColumnDef="Durationdate">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Date </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    {{moment(row?.startDate).format('DD-MM-YYYY')}} - {{moment(row?.endDate).format('DD-MM-YYYY')}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="Durationtime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Time </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row?.startTime}} - {{row?.endTime}} </td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="box">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Description </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.description || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="invited">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People invited </th>
                  <td mat-cell *matCellDef="let row"> {{row?.invitedList.length+row.inviteGroup.length}} </td>
                </ng-container>
                <ng-container matColumnDef="invited2">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People directly invited </th>
                  <td mat-cell *matCellDef="let row"> {{row?.personalInvite}} </td>
                </ng-container>
                <ng-container matColumnDef="guest">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Guest list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.acceptedList.length}}
                    <a href="javascript:void(0)" (click)="carModal(car,row._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="attendees">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Max attendees </th>
                  <td mat-cell *matCellDef="let row"> {{row?.maxLength || "0"}} </td>
                </ng-container>
                <ng-container matColumnDef="Waiting">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Waiting list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.waitingList.length}}
                    <a href="javascript:void(0)" (click)="carModal2(car2, row?._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="messagescount">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of messages in chat </th>
                  <td mat-cell *matCellDef="let row"> {{row.messagescount}} </td>
                </ng-container>
                <ng-container matColumnDef="likes">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of likes </th>
                  <td mat-cell *matCellDef="let row"> {{row?.likeCount}} </td>
                </ng-container>
                <!-- Address -->
                <ng-container matColumnDef="location">
                  <th mat-header-cell *matHeaderCellDef>Location </th>
                  <td mat-cell *matCellDef="let row"> {{row?.address || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="polls">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Polls </th>
                  <td mat-cell *matCellDef="let row"> <button class="btn btn-primary"
                      (click)="pollsmodal(polls, row?._id)">View</button></td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-nowrap"> Action </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <div ngbDropdown placement="bottom-right" display="dynamic" class="dropdown-menu-right"
                      container="body">
                      <button class="btn btn-outline-primary btn-sm" id="dropdownBasic1" ngbDropdownToggle> Action
                      </button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <!-- <a class="dropdown-item" (click)="eventdetails(eventdetail)"><i class="ti-eye"></i> View </a> -->
                        <button style="cursor: pointer;" class="dropdown-item" (click)="eventsedit(Adddetail, row)"><i
                            class="ti-marker-alt"></i>
                          Edit</button>
                        <a style="cursor: pointer;" href="javascript:void(0)" class="dropdown-item "
                          (click)="userDeleteModal(userDelete,row?._id)"><i class="ti-trash"></i>Delete</a>
                      </div>
                      <!-- <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                                            </div> -->
                    </div>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
            <ng-template #noOngoingData>
              <h3 class="m-5 d-flex align-items-center justify-content-center w-100">No data found</h3>
            </ng-template>
            <div *ngIf="!noDataToggle" class="col-md-12 text-right">
              <mat-paginator [length]="totalEvents" [pageSize]="page" [pageSizeOptions]="[5, 10, 25, 100]"
                (page)="onPaginateChange($event)"></mat-paginator>
            </div>
          </div>
        </div>
      </div>
      <!-- Column -->
    </div>
  </div>

  <!-- Upcoming -->
  <div role="tabpanel" class="tab-pane fade" id="upcoming">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <form>
                <div class="mb-2">
                  <input [ngModelOptions]="{ standalone: true }" [(ngModel)]="searchitem" (keyup)="search($event)"
                    type="text" class="form-control" id="upcomingSearch" placeholder="Search">
                </div>
              </form>
            </div>
            <div *ngIf="!noDataToggle" class="col-md-8 d-flex  justify-content-end">
              <!-- <div class="mr-2"><button class="btn btn-primary" (click)="Adddetails(Adddetail)"><i class="sl-icon-plus"></i> Add</button></div> -->
              <div ngbDropdown class="d-inline-block mb-2 mr-2">
                <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle> {{filterName}} </button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(0,'All')">All</button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(1,'Public')"> Public
                  </button>
                  <button style="cursor: pointer;" class="dropdown-item" (click)="filterStatus(2,'Private')"> Private
                  </button>
                </div>
              </div>
              <button class="btn btn-primary mb-2 mr-2"><i class="sl-icon-cloud-download"></i> Export CSV</button>
            </div>
            <div class="table-responsive" *ngIf="!noDataToggle;else noUpcomingData">
              <table mat-table class=" w-100" [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="Images">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                  <td mat-cell *matCellDef="let row">
                    <span class="img-small imageListing"><img src={{row?.eventType?.eventImage}} alt="Event" width="60"
                        class="rounded"></span>
                    <!-- <div class="cstm_icn">
                      <ul class="icon_outr">
                        <li>
                          <span class="mdi mdi-food-variant icn"></span>
                        </li>
                      </ul>
                    </div> -->
                  </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="EventName">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Name </th>
                  <td mat-cell *matCellDef="let row"> {{row?.eventName || "-"}} </td>
                </ng-container>
                <!-- ID Column -->
                <ng-container matColumnDef="Event_type">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Public/Private </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <span *ngIf="row?.eventFor==1;else alterOption">Public</span>
                    <ng-template #alterOption>
                      <span>Private</span>
                    </ng-template>
                  </td>
                </ng-container>
                <!-- <ng-container matColumnDef="Eventtype">
                                    <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Type </th>
                                    <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.Eventtype}}
                                        <br> <i class="fa fa-glass"></i>
                                    </td>
                                </ng-container> -->
                <!-- Progress Column -->
                <ng-container matColumnDef="datetime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Created On </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.createdAt | date:'medium'}} </td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="Duration">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Duration </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">{{ getdiffDates(row)}}</td>
                </ng-container>
                <ng-container matColumnDef="Durationdate">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Date </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    {{moment(row?.startDate).format('DD-MM-YYYY')}} - {{moment(row?.endDate).format('DD-MM-YYYY')}}
                  </td>
                </ng-container>
                <ng-container matColumnDef="Durationtime">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Event Time </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row?.startTime}} - {{row?.endTime}} </td>
                </ng-container>
                <!-- Progress Column -->
                <ng-container matColumnDef="box">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Description </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap"> {{row.description || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="invited">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People invited </th>
                  <td mat-cell *matCellDef="let row"> {{row?.invitedList.length+row.inviteGroup.length}} </td>
                </ng-container>
                <ng-container matColumnDef="invited2">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> People directly invited </th>
                  <td mat-cell *matCellDef="let row"> {{row?.personalInvite}} </td>
                </ng-container>
                <ng-container matColumnDef="guest">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Guest list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.acceptedList.length}}
                    <a href="javascript:void(0)" (click)="carModal(car,row._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="attendees">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Max attendees </th>
                  <td mat-cell *matCellDef="let row">{{row?.maxLength || "0"}} </td>
                </ng-container>
                <ng-container matColumnDef="Waiting">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Waiting list </th>
                  <td mat-cell *matCellDef="let row"> {{row?.waitingList.length}}
                    <a href="javascript:void(0)" (click)="carModal2(car2, row?._id)"><i class="sl-icon-info"></i></a>
                  </td>
                </ng-container>
                <ng-container matColumnDef="messagescount">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of messages in chat </th>
                  <td mat-cell *matCellDef="let row"> {{row.messagescount}} </td>
                </ng-container>
                <ng-container matColumnDef="likes">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Number of likes </th>
                  <td mat-cell *matCellDef="let row"> {{row?.likeCount}} </td>
                </ng-container>
                <!-- Address -->
                <ng-container matColumnDef="location">
                  <th mat-header-cell *matHeaderCellDef>Location </th>
                  <td mat-cell *matCellDef="let row"> {{row?.address || "-"}} </td>
                </ng-container>
                <ng-container matColumnDef="polls">
                  <th mat-header-cell *matHeaderCellDef class="text-nowrap"> Polls </th>
                  <td mat-cell *matCellDef="let row"> <button class="btn btn-primary"
                      (click)="pollsmodal(polls, row?._id)">View</button></td>
                </ng-container>
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-nowrap"> Action </th>
                  <td mat-cell *matCellDef="let row" class="text-nowrap">
                    <div ngbDropdown placement="bottom-right" display="dynamic" class="dropdown-menu-right"
                      container="body">
                      <button class="btn btn-outline-primary btn-sm" id="dropdownBasic1" ngbDropdownToggle> Action
                      </button>
                      <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <!-- <a class="dropdown-item" (click)="eventdetails(eventdetail)"><i class="ti-eye"></i> View </a> -->
                        <button style="cursor: pointer;" class="dropdown-item" (click)="eventsedit(Adddetail, row)"><i
                            class="ti-marker-alt"></i>
                          Edit</button>
                        <a style="cursor: pointer;" href="javascript:void(0)" class="dropdown-item "
                          (click)="userDeleteModal(userDelete,row?._id)"><i class="ti-trash"></i>Delete</a>
                      </div>
                      <!-- <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                                          </div> -->
                    </div>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </div>
            <ng-template #noUpcomingData>
              <h3 class="m-5 d-flex align-items-center justify-content-center w-100">No data found</h3>
            </ng-template>
            <div *ngIf="!noDataToggle" class="col-md-12 text-right">
              <mat-paginator [length]="totalEvents" [pageSize]="page" [pageSizeOptions]="[5, 10, 25, 100]"
                (page)="onPaginateChange($event)"></mat-paginator>
            </div>
          </div>
        </div>
      </div>
      <!-- Column -->
    </div>
  </div>
</div>
<ng-template #userDelete let-modal>
  <div class="modal-body">
    <p>Are you sure want to delete this event?</p>
    <div class="btn-group">
      <button type="button" class="btn btn-primary mr-2" aria-label="Close" (click)="deleteEvent()">Yes</button>
      <button type="button" class="btn btn-seconadary" aria-label="Close"
        (click)="modal.dismiss('Cross click')">No</button>
    </div>
  </div>
</ng-template>

<ng-template #pollDelete let-modal>
  <div class="modal-body">
    <p>Are you sure want to delete this poll?</p>
    <div class="btn-group">
      <button type="button" class="btn btn-primary mr-2" aria-label="Close" (click)="deletePoll()">Yes</button>
      <button type="button" class="btn btn-seconadary" aria-label="Close"
        (click)="modal.dismiss('Cross click')">No</button>
    </div>
  </div>
</ng-template>

<ng-template #car let-modal>
  <div class="modal-body">
    <h3>Guest List</h3>
    <div class="my-3 table-responsive">
      <table class="table table-bordered" *ngIf="guestList.length;else noGuestData">
        <thead>
          <th class="text-nowrap">Name</th>
          <th class="text-nowrap">User Id</th>
          <th class="text-nowrap">Phone no.</th>
          <th class="text-nowrap">Sign-up date</th>
          <th class="text-nowrap">Number of events attended</th>
          <th class="text-nowrap">Number of events hosted</th>
          <th class="text-nowrap">Number of groups he/she is in</th>
          <th *ngIf="editPermission">Action</th>
        </thead>
        <tbody>
          <tr *ngFor="let item of guestList">
            <td>{{item?.firstName}} {{item?.lastName}}</td>
            <td>{{item?.userName}}</td>
            <td class="text-nowrap">{{item?.dialCode}}-{{item?.phoneNo}}</td>
            <td> {{item?.createdAt | date: 'medium'}} </td>
            <td>{{item?.attendedEventCount}}</td>
            <td>{{item?.hostedEventCount}}</td>
            <td>{{item?.attendedGroupCount}}</td>

            <td *ngIf="editPermission">
              <a *ngIf="isUpcoming" class="btn btn-outline-primary btn-sm" id="dropdownBasic1"
                (click)="removeMember(item?._id)"> Remove </a>

                <a *ngIf="isOngoing" class="btn btn-outline-primary btn-sm" id="dropdownBasic1"
                (click)="removeMember(item?._id)"> Remove </a>

            </td>
          </tr>
        </tbody>
      </table>
      <ng-template #noGuestData>
        <p>No Data</p>
      </ng-template>
      <div class="input-group-append">
        <a class="btn mr-0 btn-danger text-white my-2" type="button" (click)="modal.close()">Close</a>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #car2 let-modal>
  <div class="modal-body">
    <h3>Waiting List</h3>
    <div class="my-3 table-responsive">
      <table *ngIf="waitingList.length;else noWaitingData" class="table table-bordered">
        <thead>
          <th class="text-nowrap">Name</th>
          <th class="text-nowrap">User Id</th>
          <th class="text-nowrap">Phone no.</th>
          <th class="text-nowrap">Sign-up date</th>
          <th class="text-nowrap">Number of events attended</th>
          <th class="text-nowrap">Number of events hosted</th>
          <th class="text-nowrap">Number of groups he/she is in</th>
          <th *ngIf="editPermission">Action</th>
        </thead>
        <tbody>
          <tr *ngFor="let item of waitingList">
            <td>{{item?.firstName}} {{item?.lastName}}</td>
            <td>{{item?.userName}}</td>
            <td class="text-nowrap">{{item?.dialCode}}-{{item?.phoneNo}}</td>
            <td> {{item?.createdAt | date: 'medium'}} </td>
            <td>{{item?.attendedEventCount}}</td>
            <td>{{item?.hostedEventCount}}</td>
            <td>{{item?.attendedGroupCount}}</td>
            <td *ngIf="editPermission">
              <a *ngIf="isUpcoming" class="btn btn-outline-success btn-sm" id="dropdownBasic1" (click)="acceptMember(item?._id)"> Accept
              </a>
              <a *ngIf="isOngoing" class="btn btn-outline-success btn-sm" id="dropdownBasic1" (click)="acceptMember(item?._id)"> Accept
              </a>
               <a *ngIf="isUpcoming" class="btn btn-outline-primary btn-sm mt-2" id="dropdownBasic1" (click)="removeWaitingMember(item?._id)">
                Reject </a>

                <a *ngIf="isOngoing" class="btn btn-outline-primary btn-sm mt-2" id="dropdownBasic1" (click)="removeWaitingMember(item?._id)">
                  Reject </a>
            </td>

          </tr>

        </tbody>
      </table>
      <ng-template #noWaitingData>
        <p>No Data</p>
      </ng-template>

      <div class="input-group-append">
        <a class="btn mr-0 btn-danger text-white my-2" type="button" (click)="modal.close()">Close</a>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #Adddetail let-modal>
  <div class="modal-body">
    <div class="card">
      <form [formGroup]="addEventForm">
        <div class="form-body">
          <div class="card-body">
            <div class="row p-t-20">
              <div class="col-12 cstm_icn">
                <h4 class="mb-4"> Select Icon </h4>
                <ul class="icon_outr">
                  <!-- " -->
                  <li *ngFor="let item of ArrayImage;let i = index;">
                    <img [class.selected]="item?.isSelected" (click)="selectIcon(item.id)"
                      [src]="item.image?item.image:'assets/images/dashed.png'" height="80" width="90" alt="123" />

                  </li>

                </ul>

                <!-- <small
                *ngIf="addEventForm.controls['icon'].invalid"
                class="text-danger d-inline-block pt-1">
                *Event icon is required!
                </small> -->
                <!-- <div class="form-group">
                                    <label class="control-label"> Image  </label>
                                    <input type="file" class="form-control">
                                </div> -->
                <!-- <mat-select>
                                    <mat-option>

                                    </mat-option>
                                </mat-select> -->
                <!-- <mat-form-field appearance="fill" class="w-100">
                                    <mat-label>Select Icon</mat-label>
                                    <mat-select [(ngModel)]="selectedValue" name="food">
                                        <mat-option class="slct_icn"> <span class="mdi mdi-food-variant"></span> </mat-option>
                                        <mat-option class="slct_icn"> <span class="mdi mdi-food-apple icn"></span> </mat-option>
                                        <mat-option class="slct_icn"> <span class="mdi mdi-food icn"></span> </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Event Name </label>
                  <input #eventName (keydown.space)="doSomething($event ,eventName.value)" formControlName="eventName"
                    type="text" id="eventName" class="form-control" placeholder="Enter Event Name">
                  <small
                    *ngIf=" addEventForm.controls['eventName'].touched && addEventForm.controls['eventName'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Event Name is invalid(Max limit - 35)
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('eventName', 'required')">
                    *Event Name is required!
                  </small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Public/Private </label>
                  <!-- <input type="text" id="firstName" class="form-control" placeholder="Eg:- Public"> -->
                  <select (change)="showInvites($event)" formControlName="eventFor" name="" id="" class="form-control">
                    <option [value]="1"> Public </option>
                    <option [value]="2"> Private </option>
                  </select>
                  <small class="text-danger" *ngIf="submitted && errorHandling('eventFor', 'required')">
                    *Type of event is required!
                  </small>
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Max Attendees </label>
                  <input formControlName="maxLength" min="0" max="9999" minlength="1" maxlength="4" type="number"
                    id="maxAttendees" class="form-control form-control-danger" >
                  <small
                    *ngIf=" addEventForm.controls['maxLength'].touched && addEventForm.controls['maxLength'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please enter Max Attendees, limit is 0-9999 !
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('maxLength', 'required')">
                    *Max Attendees is required!
                  </small>
                </div>
              </div>
              <!-- <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Duration </label>
                  <input type="text" id="email" class="form-control form-control-danger"
                    placeholder="Enter duration of event">
                </div>
              </div> -->
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Start Date </label>
                  <input [min]="getToday()" (change)="startDateCheck($event)" formControlName="startDate" type="date"
                    id="startDate" class="form-control" placeholder="Enter Date">
                  <small
                    *ngIf=" addEventForm.controls['startDate'].touched && addEventForm.controls['startDate'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please choose start date !
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('startDate', 'required')">
                    *Start date is required!
                  </small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> End Date </label>
                  <input [min]="getMaxEndDate()" (change)="endDateCheck($event)" formControlName="endDate" type="date"
                    id="endDate" class="form-control" placeholder="Enter Date">
                  <small *ngIf=" addEventForm.controls['endDate'].touched && addEventForm.controls['endDate'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please choose end date !
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('endDate', 'required')">
                    *End date is required!
                  </small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Start Time </label>
                  <input (change)="startTimeCheck($event)" formControlName="startTime" type="time" id="startTime"
                    class="form-control" placeholder="Enter Date">
                  <small
                    *ngIf=" addEventForm.controls['startTime'].touched && addEventForm.controls['startTime'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please choose start time !
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('startTime', 'required')">
                    *Start time is required!
                  </small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> End Time </label>
                  <input (change)="endTimeCheck($event)" formControlName="endTime" type="time" id="endTime"
                    class="form-control" placeholder="Enter Date">
                  <small *ngIf=" addEventForm.controls['endTime'].touched && addEventForm.controls['endTime'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please choose end time !
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('endTime', 'required')">
                    *End time is required!
                  </small>
                </div>
              </div>
              <!-- /span -->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Location </label>
                  <input #location (keydown.space)="doSomething($event ,location.value)" formControlName="address"
                    type="text" id="location" class="form-control form-control-danger"
                    placeholder="Enter location of event">
                  <small *ngIf=" addEventForm.controls['address'].touched && addEventForm.controls['address'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please choose location!
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('address', 'required')">
                    *Location is required!
                  </small>
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Event Description </label>
                  <textarea #des (keydown.space)="doSomething($event ,des.value)" formControlName="description"
                    class="form-control form-control-danger"
                    placeholder="Type here description for this Event"></textarea>
                  <small
                    *ngIf=" addEventForm.controls['description'].touched && addEventForm.controls['description'].invalid"
                    class="text-danger d-inline-block pt-1">
                    *Please enter valid description(Max limit - 750)
                  </small>
                  <small class="text-danger" *ngIf="submitted && errorHandling('description', 'required')">
                    *Description is required!
                  </small>
                </div>
              </div>



              <div class="col-6 mb-3">
                <h4>Invite Users/Groups <span *ngIf="usersArray.length">({{usersArray.length}} users Invited)</span>
                </h4>
                <button class="btn btn-primary" (click)="invitemodal(invite)"> Invite </button>
              </div>

              <div class="col-md-6" *ngIf="showToggle">
                <div class="form-group">
                  <label class="control-label"> Guests can invite others </label>
                  <mat-slide-toggle class="ml-4" [checked]="isGuestInvited" (change)="changeGuestInvites($event)">
                  </mat-slide-toggle>

                </div>
              </div>
              <!-- <div *ngIf="isEdit">

                <div class="col-12">
                  <h4>Polls</h4>
                </div>
                <div class="col-md-6">
                  <div class="form-group has-danger">
                    <label class="control-label"> Name </label>
                    <input disabled type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll name">
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-group has-danger">
                    <label class="control-label"> option </label>
                    <input disabled type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll option">
                  </div>
                </div>

                <div class="col-md-6 d-flex align-items-center">
                  <button disabled class="btn btn-primary">Add Option</button>
                </div>
                <div class="col-12">
                  <button disabled class="btn btn-primary">Add New Poll</button>
                </div>
              </div> -->


            </div>
            <!--/row-->
          </div>
          <div class="form-actions">
            <div class="card-body">
              <button *ngIf="isAdd" type="submit" class="btn btn-success mr-3" (click)="submitEvent()"> Save</button>
              <button *ngIf="isEdit" type="submit" class="btn btn-success mr-3" (click)="submitEventEdit()">
                Update</button>
              <button type="button" class="btn btn-dark" (click)="cancelForm()">Cancel</button>
            </div>
          </div>
        </div>
      </form>
    </div>

  </div>
</ng-template>
<ng-template #eventdetail let-modal>
  <div class="modal-body">
    <div class="card">
      <form action="#">
        <div class="form-body">
          <div class="card-body">
            <div class="row p-t-20">
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Image </label>
                  <input type="file" class="form-control">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Event Name </label>
                  <input type="text" id="firstName" class="form-control" placeholder="Event 1">

                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Public/Private </label>
                  <input type="text" id="firstName" class="form-control" placeholder="Public">

                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Date </label>
                  <input type="Date" id="firstName" class="form-control" placeholder="05/05/21">
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Duration </label>
                  <input type="text" id="duration" class="form-control form-control-danger" placeholder="2 Days">
                </div>
              </div>
              <!-- /span -->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Location </label>
                  <input type="text" id="location" class="form-control form-control-danger" placeholder="London">
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Event Description </label>
                  <textarea class="form-control form-control-danger"
                    placeholder="This is Description of this Event"></textarea>
                </div>
              </div>
              <!--/span-->
            </div>
            <!--/row-->
          </div>

          <div class="form-actions">
            <div class="card-body">
              <!-- <button type="submit" class="btn btn-primary mr-3" (click)="modal.dismiss('Cross click')"><i class="fa fa-check"></i> Update</button> -->
              <button type="button" class="btn btn-dark" (click)="modal.dismiss('Cross click')">Cancel</button>
            </div>
          </div>
        </div>
      </form>
    </div>

  </div>
</ng-template>
<ng-template #eventedit let-modal>
  <div class="modal-body">
    <div class="card">
      <form action="#">
        <div class="form-body">
          <div class="card-body">
            <div class="row p-t-20">
              <!-- <div class="col-md-6">
                                <div class="form-group">
                                    <label class="control-label"> Image  </label>
                                    <input type="file" class="form-control">
                                </div>
                            </div> -->
              <div class="col-12 cstm_icn">
                <h4 class="mb-4"> Select Icon </h4>
                <ul class="icon_outr">
                  <li class="selected">
                    <span class="mdi mdi-food-variant icn"></span>
                  </li>
                  <li>
                    <span class="mdi mdi-food-apple icn"></span>
                  </li>
                  <li>
                    <span class="mdi mdi-food icn"></span>
                  </li>
                </ul>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Event Name </label>
                  <input type="text" id="firstName" class="form-control" placeholder="Event 1">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Public/Private </label>
                  <!-- <input type="text" id="firstName" class="form-control" placeholder="Public"> -->
                  <select name="" id="" class="form-control">
                    <option> Public </option>
                    <option> Private </option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Max Attendees </label>
                  <input type="number" id="email" class="form-control form-control-danger"
                    placeholder="Enter duration of event">
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group">
                  <label class="control-label"> Date </label>
                  <input type="date" id="firstName" class="form-control" placeholder="example@gmail.com">

                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Duration </label>
                  <input type="text" id="email" class="form-control form-control-danger" placeholder="2 days">
                </div>
              </div>
              <!-- /span -->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Location </label>
                  <input type="text" id="email" class="form-control form-control-danger" placeholder="London">
                </div>
              </div>
              <!--/span-->
              <div class="col-md-6">
                <div class="form-group has-danger">
                  <label class="control-label"> Event Description </label>
                  <textarea class="form-control form-control-danger"
                    placeholder="This is Description of this Event"></textarea>
                </div>
              </div>
              <div class="col-6 mb-3">
                <h4>Invite Guests/User</h4>
                <button class="btn btn-primary" (click)="invitemodal(invite)"> Invite </button>
              </div>
              <!--/span-->
              <!-- <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label">Cancelled  Orders</label>
                                    <input type="text" id="email" class="form-control form-control-danger" placeholder="00">
                                </div>
                            </div> -->
              <!--/span-->
              <!-- <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label">Completed Orders</label>
                                    <input type="text" id="email" class="form-control form-control-danger" placeholder="40">
                                </div>
                            </div> -->
              <!--/span-->
              <!-- <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label">City</label>
                                    <input type="text" id="city" class="form-control form-control-danger" placeholder="Berlin">
                                </div>
                            </div> -->
              <!--/span-->
              <!-- <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label">Pincode</label>
                                    <input type="text" id="email" class="form-control form-control-danger" placeholder="Pincode">
                                </div>
                            </div> -->
              <!--/span-->
              <!-- <div class="col-md-12">
                                <div class="form-group has-danger">
                                    <label class="control-label">Address</label>
                                    <textarea name="" id="" cols="30" rows="5" class="form-control" placeholder="#433 New garden Complex"></textarea>
                                </div>
                            </div> -->
              <!--/span-->
              <!-- <div class="col-12">
                                <h4>Polls</h4>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label"> Name </label>
                                    <input type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll name">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label"> option </label>
                                    <input type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll option">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group has-danger">
                                    <label class="control-label"> option </label>
                                    <input type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll option">
                                </div>
                            </div>
                            <div class="col-md-6 d-flex align-items-center">
                                <button class="btn btn-primary">Add Option</button>
                            </div> -->
            </div>
            <!--/row-->
          </div>

          <div class="form-actions">
            <div class="card-body">
              <button type="submit" class="btn btn-primary mr-3" (click)="modal.dismiss('Cross click')"><i
                  class="fa fa-check"></i> Update</button>
              <button type="button" class="btn btn-dark" (click)="modal.dismiss('Cross click')">Cancel</button>
            </div>
          </div>
        </div>
      </form>
    </div>

  </div>
</ng-template>
<ng-template #polls let-modal>
  <div class="modal-body">
    <h3>Polls List</h3>
    <div class="my-3 table-responsive">
      <table *ngIf="pollsData.length;else noPollsData" class="table table-bordered">
        <thead>
          <th class="text-nowrap">Name</th>
          <th class="text-nowrap">Options</th>
          <th *ngIf="editPermission">Action</th>
        </thead>
        <tbody>
          <tr *ngFor="let polls of pollsData">
            <td>{{polls?.pollName}}</td>
            <td>
              <table class="table table-bordered">
                <thead>
                  <th class="text-nowrap">Options</th>
                  <th class="text-nowrap">Votes</th>
                </thead>
                <tbody>
                  <tr *ngFor="let item of polls?.options">
                    <td>{{item?.option}}</td>
                    <td> {{item?.count}} </td>
                  </tr>
                </tbody>
              </table>
            </td>
            <td *ngIf="editPermission">
              <a class="btn btn-danger btn-sm" (click)="editpollmodal(editpoll,polls)"> <i
                  class="fa fa-pencil-square-o text-white"></i> </a>
              <a (click)="pollDeleteModal(pollDelete,polls?._id)" class="btn btn-danger btn-sm ml-2"> <i
                  class="fa fa-trash text-white"></i> </a>
            </td>
          </tr>
        </tbody>
      </table>
      <ng-template #noPollsData>
        <p>No Poll added</p>
      </ng-template>

      <button *ngIf="isOngoing && addPermission" class="btn btn-primary d-block mx-1"
        (click)="isModalEnable = true; addpollmodal(editpoll)">Add Poll</button>
      <button *ngIf="isUpcoming && addPermission" class="btn btn-primary d-block mx-1"
        (click)="isModalEnable = true; addpollmodal(editpoll)">Add Poll</button>
      <a class="btn btn-danger text-white my-2 mx-1" type="button" (click)="modal.close()">Close</a>
    </div>
  </div>
</ng-template>


<ng-template #editpoll let-modal>
  <div class="modal-body">
    <div class="card">
      <form [formGroup]="addPollForm">
        <div class="form-body">
          <div class="card-body">
            <div class="row p-t-20">
              <div class="col-12">
                <h4>Add Poll</h4>
              </div>
              <div class="col-md-12">
                <div class="form-group has-danger">
                  <label class="control-label"> Name </label>
                  <input formControlName="pollName" #pollName (keydown.space)="doSomething($event ,pollName.value)"
                    type="text" id="text" class="form-control form-control-danger" placeholder="Enter Poll name">
                  <small *ngIf="addPollForm.controls['pollName'].touched && addPollForm.controls['pollName'].invalid"
                    class="text-danger">
                    *Poll name is required.</small>
                </div>
              </div>
              <div class="col-md-12 form-group" formArrayName="options"
                *ngFor="let option of addPollForm.get('options')['controls']; let i = index;">
                <div class="input-group " [formGroupName]="i">
                  <input #polloption (keydown.space)="doSomething($event ,polloption.value)" class="form-control"
                    placeholder="Enter option" formControlName="option">
                  <button class="btn btn-danger" (click)="removeOption(i)"><i class="fa fa-trash"></i></button>
                </div>
                <small *ngIf="submitted && option.get('option').hasError('required')" class="text-danger">
                  *Option is required.</small>
              </div>

              <div class="col-md-6 d-flex align-items-center">
                <button class="btn btn-primary" (click)="pushFormArray()">Add Option</button>
              </div>
            </div>
            <!--/row-->
          </div>
          <div class="form-actions">
            <div class="card-body">
              <button *ngIf="!isEditPoll" type="submit" (click)="submitPoll()" class="btn btn-primary mr-3"><i
                  class="fa fa-check"></i>
                Add</button>
              <button *ngIf="isEditPoll" type="submit" (click)="editPoll()" class="btn btn-primary mr-3"><i
                  class="fa fa-check"></i>
                Update</button>
              <button type="button" id="close-modal" class="btn btn-dark"
                (click)="cancelPoll();modal.close('editpoll')">Cancel</button>
            </div>
          </div>
        </div>
      </form>
    </div>

  </div>
</ng-template>

<ng-template #invite let-modal>
  <div class="modal-body">
    <h3 class="pb-3">User List</h3>
    <div class="col-6 px-0"><input [ngModelOptions]="{ standalone: true }" [(ngModel)]="searchitemUser"
        (keyup)="usersSearch($event)" type="text" class="form-control" id="search" placeholder="Search"></div>
    <div class="my-3 table-responsive cstm_tbl">
      <table class="table table-bordered">
        <thead>
          <th class="text-nowrap">Select</th>
          <th class="text-nowrap">User Name</th>
          <th class="text-nowrap">Group Name</th>
          <th class="text-nowrap">Phone no.</th>
          <th class="text-nowrap">Sign-up date</th>
          <th class="text-nowrap">Number of events attended</th>
          <th class="text-nowrap">Number of events hosted</th>
          <th class="text-nowrap">Number of groups he/she is in</th>
          <!-- <th>Action</th> -->
        </thead>
        <tbody>
          <tr *ngFor="let user of usersData">
            <td> <input (change)="inviteUsers($event,user?._id)" type="checkbox"
                [checked]="tempArray.includes(user?._id)"> </td>
            <td>{{user?.firstName}} {{user?.lastName}}</td>
            <td>{{user?.name|| "-"}}</td>
            <td class="text-nowrap">{{user?.dialCode}}-{{user?.phoneNo}}</td>
            <td> {{user.createdAt | date:'medium'}} </td>
            <td>{{user?.attendedEventCount || "-"}}</td>
            <td>{{user?.hostedEventCount || "-"}}</td>
            <td>{{user?.attendedGroupCount || "-"}}</td>
            <!-- <td> <a class="btn btn-outline-success btn-sm" id="dropdownBasic1"> Invite </a> </td> -->
          </tr>

        </tbody>
      </table>
      <!-- <div class="col-md-12 text-right">
        <mat-paginator [length]="totalUsers" [pageSize]="pageUser" [pageSizeOptions]="[5, 10, 25, 100]"
          (page)="onPaginateChangeUser($event)"></mat-paginator>
      </div> -->
    </div>
    <div class="input-group-append">
      <a class="btn mr-0 btn-success text-white my-2 mr-2" type="button"
        (click)="saveArray();modal.close('invite')">Submit</a>
      <a *ngIf="!isEdit;else editBtn" class="btn mr-0 btn-danger text-white my-2" type="button"
        (click)="removeArray();modal.close()">Close</a>
      <ng-template #editBtn>
        <a class="btn mr-0 btn-danger text-white my-2" type="button" (click)="removeEditArray();modal.close()">Close</a>
      </ng-template>

    </div>
  </div>
</ng-template>
